git 07431a1c1064c05eeb7e54f6536e28e6604a9a25

---

# Версии фреймворка

- [Laravel 5.0](#laravel-5.0)
- [Laravel 4.2](#laravel-4.2)
- [Laravel 4.1](#laravel-4.1)

<a name="laravel-5.0"></a>
## Laravel 5.0

В Laravel 5.0 изменена дефолтная структура приложения. Теперь все приложение входит в стандарт автоматической загрузки PSR-4 целиком и является более подходящей основой для построения надежного приложения. Рассмотрим основные изменения:

### Новая структура папок

Папки `app/models` больше нет. Теперь все ваши классы живут в папке `app`, и по умолчанию находятся в неймспейсе `App`. Название неймспейса хранится в файле `config/namespaces.php` и его можно изменить во всех ваших классах сразу артизан-командой `php artisan app:name`.

Контроллеры, фильтры и requests (новый вид классов в Laravel 5.0) сгруппрованы в папке `app/Http` как классы, относящиеся к HTTP-слою вашего приложения. Фильтр роутов теперь не функция, а класс, который находится в отдельном файле.

Новая папка `app/Providers` является заменой папки `app/start` в предыдущих версиях Laravel 4.x. В этой папке находятся сервис-провайдеры, которые осуществляют инициализацию приложения - регистрацию классов-обработчиков ошибок, настройку логирования, загрузку файла маршрутов (роутов) и т.п. И, конечно, ваши сервис-провайдеры тоже могут находиться там.

Файлы локализаций (lang) и файлы шаблонов (views) теперь находятся в папке `resources`.

### Всё в неймспейсе

Теперь все классы вашего приложения, находящиеся в папке `app`, входят в неймспейс, по умолчанию называемый `App`. Composer будет автоматически загружать класс, расположенный в `app` используя стандарт автозагрузки PSR-4. Теперь не нужно выполнять команду `composer dump-autoload`, когда вы добавляете новый класс. И, так как контроллеры теперь в неймспейсе, вы должны явно импортировать классы, которые вы используете в них - при помощи `use`.

### Dependency Injection в методах контроллеров и роутах

В Laravel 4.х вы могли указать некий класс в аргументах конструктора контроллера, и он автоматически встроится в экземпляр контроллера. Теперь вы можете делать то же самое в любом методе контроллера:

	public function show(PhotoService $photos, $id)
	{
		$photo = $photos->find($id);

		//
	}

### Form Requests

В Laravel 5.0 появились так называемые form requests. Это объект, который вместе с вышеописанным DI в методах контроллера, предлагает новый встроенный во фреймворк метод проверки и валидации пользовательского ввода. 

Например, реквест-класс формы регистрации:

	<?php namespace App\Http\Requests;

	class RegisterRequest extends FormRequest {

		public function rules()
		{
			return [
				'email' => 'required|email|unique:users',
				'password' => 'required|confirmed|min:8',
			];
		}

		public function authorize()
		{
			return true;
		}

	}

Далее вы вот так используете его в методе контроллера регистрации:

	public function register(RegisterRequest $request)
	{
		var_dump($request->input());
	}

Когда IoC Container видит, что в метод контроллера подключается класс типа `FormRequest`, запускается **автоматическая валидация** пользовательского ввода по правилам, заявленным в подключаемом классе. Если валидация не проходит, произойдет автоматический редирект с передачей ошибок валидации через сессии. **Валидация форм еще никогда не была такой простой**. Узнать больше про реквест-классы можно в соответствующей главе [документации](/docs/validation#form-requests).

### Новые генераторы кода

Добавлены генераторы новых типов классов, появившихся в 5.0 - `provider:make`, `filter:make`, и `request:make`

### Кэширование роутов

Если вы активно используете `Route::controller` и `Route::resource`, то теперь вы можете использовать artisan-команду `route:cache` для сохранения сгенерированных роутов. Если у вас 100+ подобных роутов, то кэширование может ускорить регистрацию роутов в 50 раз и больше.
